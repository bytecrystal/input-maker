# Rime schema settings
# encoding: utf-8

schema:
  schema_id: tuma
  name: "å…”ç "
  version: "1.0"
  author:
    - åŸºäº C_42 2.4ç‰ˆæœ¬æ”¹ç¼–
    - å®‰é™çš„æ°´
  description: |
    æ”¹ç¼–è‡ªc_42çš„å½¢ç æ–¹æ¡ˆï¼Œè€Œå‰èº«æ˜¯ Cicin æ‰€ä½œçš„ C è¾“å…¥
  dependencies:
    - luna_pinyin
    - stroke

switches:
  - name: ascii_mode
    reset: 0
    states: [ ä¸­, è¥¿ ]
  - name: full_shape
    states: [ åŠ, å…¨ ]
  - name: ascii_punct
    states: [ ã€‚, ï¼ ]
  - name: zh_trad
    reset: 0
    states: [ ç®€, ç¹ ]
  - name: emoji_suggestion
    states: [ "ğŸˆšï¸ï¸\uFE0E", "ğŸˆ¶ï¸ï¸\uFE0F" ]
    reset: 1


engine:
  processors:
    - ascii_composer
    - recognizer
    - key_binder
    - speller
    - punctuator
    - selector
    - navigator
    - express_editor
  segmentors:
    - ascii_segmentor
    - matcher
    - abc_segmentor
    - affix_segmentor@luna_pinyin
    - affix_segmentor@luna_pinyin_lookup
    - affix_segmentor@stroke_lookup
    - affix_segmentor@reverse_lookup
    - punct_segmentor
    - fallback_segmentor
  translators:
    - punct_translator
    - reverse_lookup_translator
    - table_translator@fixed
    - table_translator
    - script_translator@luna_pinyin
    - script_translator@luna_pinyin_lookup
    - table_translator@stroke_lookup
  filters:
    - simplifier
    - simplifier@zh_trad
    - simplifier@emoji_suggestion
    - reverse_lookup_filter@luna_pinyin_reverse_lookup
    - reverse_lookup_filter@stroke_reverse_lookup
    - uniquifier


speller:
  alphabet: "qwertasdfgzxcvbyuiophjklnm"
  auto_select: true
  max_code_length: 4 #é¡¶å­—ä¸Šå± ï¼ˆåœ¨QQèŠå¤©çª—å£å‡ºé—®é¢˜ï¼Œä¼šåƒå­—ï¼Œå¦‚â€œæœ«ç¬”è¯†åˆ«â€ï¼Œä¼šåªç•™ä¸‹â€œè¯†åˆ«â€ã€‚æš‚æœªæ‰¾åˆ°è§£å†³åŠæ³•ã€‚ï¼‰
  auto_select_unique_candidate: true #æ— é‡ç è‡ªåŠ¨ä¸Šå±
  delimiter: ";'"

fixed:
  __include: /translator
  initial_quality: 1000
  enable_encoder: false
  enable_user_dict: false

translator:
  dictionary: tuma
  db_class: tabledb
  initial_quality: 100000
  enable_charset_filter: false
  enable_sentence: false
  enable_encoder: false
  encode_commit_history: false
  enable_completion: true
  enable_user_dict: true
  disable_user_dict_for_patterns:
    - "^z.*$"
    - ^[a-y][a-z]{0,3}$
#  enable_user_dict: false #ç¦æ­¢è¯åºè°ƒæ•´


#
emoji_suggestion:
  opencc_config: emoji.json
  option_name: emoji_suggestion
  tips: all
  tags:
    - abc
    - luna_pinyin_lookup

# ç”¨äºæ··è¾“
luna_pinyin:
  tag: luna_pinyin
  dictionary: luna_pinyin
  initial_quality: 0.2

zh_trad:
  opencc_config: s2tw.json
  option_name: zh_trad
  tags:
    - abc
#
reverse_lookup:
  tag: reverse_lookup
  prefix: "`"    # åæŸ¥å¼•å¯¼ç¬¦ã€Œ`ã€
  # suffix:   # åæŸ¥å…³é—­ç¬¦ï¼Œæš‚ä¸å®šä¹‰
  tips: ã€åæŸ¥ï¼šæ‹¼éŸ³+ç­†ç•«ã€‘
  closing_tips: ã€åæŸ¥é—œé–‰ã€‘
    # preedit_format:
  # - xform/([nljqxy])v/$1Ã¼/
  extra_tags:
    - luna_pinyin_lookup
    - stroke_lookup

luna_pinyin_lookup:
  tag: luna_pinyin_lookup
  dictionary: luna_pinyin
  prefix: '`P'
  tips: ã€æœ™æœˆæ‹¼éŸ³åæŸ¥ã€‘
  closing_tips: ã€åæŸ¥é—œé–‰ã€‘
  initial_quality: 0.2

stroke_lookup:
  tag: stroke_lookup
  dictionary: stroke
  prefix: '`B'
  tips: ã€äº”ç­†åŠƒåæŸ¥ã€‘
  closing_tips: ã€åæŸ¥é—œé–‰ã€‘
  initial_quality: 0.5
  preedit_format:
    - 'xform/^([hspnz]+)$/$1\tï¼ˆ\U$1\Eï¼‰/'
    - xlit/HSPNZ/ä¸€ä¸¨ä¸¿ä¸¶ä¹™/

luna_pinyin_reverse_lookup:
  tags: [ luna_pinyin, luna_pinyin_lookup ]
  dictionary: huma_trad

stroke_reverse_lookup:
  __include: luna_pinyin_reverse_lookup
  tags: [ stroke_lookup ]

# æ ‡ç‚¹
punctuator:
  import_preset: symbols

key_binder:
  import_preset: default
  bindings:
    - {accept: semicolon, send: 2, when: has_menu} #åˆ†è™Ÿé¸ç¬¬äºŒé‡ç¢¼
    - {accept: apostrophe, send: 3, when: has_menu} #å¼•è™Ÿé¸ç¬¬ä¸‰é‡ç¢¼

recognizer:
  patterns:
    uppercase: "^(?![`;]).*[A-Z][-_+.'0-9A-Za-z]*$"
    reverse_lookup:     "^`([a-z]+'?)*$"
    luna_pinyin_lookup: "^`P([a-z]+'?)*$"
    stroke_lookup:      "^`B([a-z]+'?)*$"
    punct: '^/([0-9]0?|[A-Za-z]+)$'


menu:
  page_size: 9
